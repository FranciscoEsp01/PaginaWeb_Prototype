<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Cat√°logo | SIMCREW.CL</title>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans overflow-x-hidden">

    <nav class="flex justify-between items-center p-6 bg-black border-b border-orange-600 sticky top-0 z-40">
        <a href="SimCrew.html" class="text-2xl font-bold tracking-tighter text-orange-500 uppercase">SIMCREW<span class="text-white">.CL</span></a>
        <div class="space-x-8 hidden md:flex items-center">
            <div class="relative group">
                <button class="text-orange-500 font-black uppercase text-sm tracking-widest flex items-center gap-2">Cat√°logo <span>‚ñº</span></button>
                <div class="absolute left-0 mt-2 w-56 bg-black border border-gray-800 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                    <a href="SimCrewCATALOGO.html" class="block px-4 py-4 text-[10px] font-black uppercase tracking-widest hover:bg-orange-600 transition rounded-t-xl">Todo el Cat√°logo</a>
                    <a href="SimCrewCATALOGO.html?cat=volantes" class="block px-4 py-4 text-[10px] font-black uppercase tracking-widest hover:bg-orange-600 transition">Volantes</a>
                    <a href="SimCrewCATALOGO.html?cat=cockpits" class="block px-4 py-4 text-[10px] font-black uppercase tracking-widest hover:bg-orange-600 transition">Cockpits</a>
                    <a href="SimCrewCATALOGO.html?cat=pedales" class="block px-4 py-4 text-[10px] font-black uppercase tracking-widest hover:bg-orange-600 transition">Pedales</a>
                    <a href="SimCrewCATALOGO.html?cat=perifericos" class="block px-4 py-4 text-[10px] font-black uppercase tracking-widest hover:bg-orange-600 transition rounded-b-xl">Perif√©ricos</a>
                </div>
            </div>
            <a href="#" class="hover:text-orange-500 uppercase text-sm font-bold tracking-widest">Soporte</a>
        </div>
        <span id="carrito-contador" class="bg-orange-600 px-3 py-1 rounded-full text-sm font-bold cursor-pointer hover:scale-110 transition">üõí (0)</span>
    </nav>

    <div class="container mx-auto px-6 py-10 flex flex-col md:flex-row gap-8">
        <aside class="w-full md:w-1/4">
            <div class="bg-black border border-gray-800 p-6 rounded-2xl sticky top-24">
                <h2 class="text-xl font-black mb-6 uppercase italic tracking-tighter text-orange-500">Filtros</h2>
                <div class="space-y-4">
                    <label class="flex items-center gap-3 cursor-pointer group uppercase text-xs font-bold tracking-widest">
                        <input type="checkbox" value="volantes" class="filtro-cat w-4 h-4 accent-orange-500"> 
                        <span class="group-hover:text-orange-500 transition">Volantes</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer group uppercase text-xs font-bold tracking-widest">
                        <input type="checkbox" value="cockpits" class="filtro-cat w-4 h-4 accent-orange-500"> 
                        <span class="group-hover:text-orange-500 transition">Cockpits</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer group uppercase text-xs font-bold tracking-widest">
                        <input type="checkbox" value="pedales" class="filtro-cat w-4 h-4 accent-orange-500"> 
                        <span class="group-hover:text-orange-500 transition">Pedales</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer group uppercase text-xs font-bold tracking-widest">
                        <input type="checkbox" value="perifericos" class="filtro-cat w-4 h-4 accent-orange-500"> 
                        <span class="group-hover:text-orange-500 transition">Perif√©ricos</span>
                    </label>
                </div>
            </div>
        </aside>

        <main class="w-full md:w-3/4">
            <div id="grid-productos" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
        </main>
    </div>

    <div id="carrito-drawer" class="fixed inset-y-0 right-0 w-full md:w-96 bg-black border-l border-orange-600 z-50 transform translate-x-full transition-transform duration-300 ease-in-out">
        <div class="flex flex-col h-full p-6">
            <div class="flex justify-between items-center border-b border-gray-800 pb-4">
                <h2 class="text-2xl font-black italic text-orange-500 uppercase">Tu Carro</h2>
                <button onclick="toggleCarrito()" class="text-white text-3xl hover:text-orange-500 transition">&times;</button>
            </div>
            <div id="carrito-items" class="flex-grow overflow-y-auto py-4"></div>
            <div class="border-t border-gray-800 pt-6">
                <div class="flex justify-between mb-4"><span class="text-gray-400 font-bold text-xs uppercase">Total</span><span id="carrito-total" class="text-2xl font-black">$0</span></div>
                <button onclick="enviarPedidoGmail()" class="w-full bg-orange-600 py-4 font-black uppercase italic rounded-xl hover:bg-orange-700 transition">Finalizar Compra</button>
            </div>
        </div>
    </div>

    <div id="carrito-overlay" class="fixed inset-0 bg-black/60 z-40 hidden backdrop-blur-sm"></div>

    <script src="productos.js"></script>
    <script src="carrito.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('grid-productos');
            const checkboxes = document.querySelectorAll('.filtro-cat');

            function renderizarProductos(productosFiltrados) {
                grid.innerHTML = '';
                if (productosFiltrados.length === 0) {
                    grid.innerHTML = '<p class="col-span-full text-center text-gray-500 uppercase font-black italic mt-20">No hay productos en esta categor√≠a</p>';
                    return;
                }

                productosFiltrados.forEach(p => {
                    const card = document.createElement('div');
                    card.className = "producto-card bg-black border border-gray-800 rounded-2xl p-6 transition hover:border-orange-500 animate-fadeIn";
                    
                    card.innerHTML = `
                        <a href="SimCrewDETALLE.html?id=${p.id}">
                            <div class="h-40 bg-zinc-900 rounded-xl mb-4 flex items-center justify-center overflow-hidden">
                                <img src="${p.imagen || 'https://via.placeholder.com/400?text=SIMCREW'}" alt="${p.nombre}" class="object-contain h-full w-full p-4 hover:scale-110 transition duration-500">
                            </div>
                            <p class="text-[10px] text-orange-500 font-black uppercase tracking-widest">${p.categoria}</p>
                            <h3 class="text-lg font-bold mt-1 text-white hover:text-orange-500 transition uppercase italic leading-tight h-12 overflow-hidden">${p.nombre}</h3>
                        </a>
                        <p class="text-2xl font-black mt-4 italic text-white">$${p.precio.toLocaleString('es-CL')}</p>
                        <button onclick="agregarAlCarrito('${p.nombre}', ${p.precio})" class="w-full mt-6 bg-white text-black hover:bg-orange-600 hover:text-white font-black py-3 rounded-xl transition-all uppercase italic text-xs">
                            A√±adir al Carro
                        </button>
                    `;
                    grid.appendChild(card);
                });
            }

            function filtrar() {
                const seleccionadas = Array.from(checkboxes)
                    .filter(i => i.checked)
                    .map(i => i.value);

                const filtrados = productosDB.filter(p => 
                    seleccionadas.length === 0 || seleccionadas.includes(p.categoria)
                );

                renderizarProductos(filtrados);
            }

            checkboxes.forEach(box => box.addEventListener('change', filtrar));
            
            // Inicializaci√≥n
            filtrar();
        });
    </script>
</body>
</html>